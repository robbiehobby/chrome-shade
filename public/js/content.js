"use strict";(function(){let l=!1,e=document.querySelector("page-dimmer");e||(e=document.createElement("page-dimmer"),localStorage.getItem("page-dimmer-enabled")!=="1"&&(e.style.opacity="0",e.style.visibility="hidden"),e.style.position="fixed",e.style.zIndex="2147483647",e.style.inset="0",e.style.pointerEvents="none",e.style.backdropFilter=localStorage.getItem("page-dimmer-settings")||"",document.documentElement.appendChild(e));function i(t){if(!e)return;let a=[];t.enabled&&t.overlay&&(a.push(`brightness(${t.overlay.brightness})`),a.push(`contrast(${t.overlay.contrast})`),a.push(`sepia(${t.overlay.sepia})`),a.push(`grayscale(${t.overlay.grayscale})`)),e.style.backdropFilter=a.join(" "),e.style.opacity=t.enabled?"1":"0",e.style.visibility=t.enabled?"visible":"hidden",localStorage.setItem("page-dimmer-enabled",t.enabled?"1":"0"),localStorage.setItem("page-dimmer-settings",e.style.backdropFilter),l||(setTimeout(()=>{e.style.transition="all",e.style.transitionDuration="0.3s",e.style.transitionTimingFunction="ease"}),l=!0)}chrome.runtime.sendMessage({type:"getTab"},t=>chrome.runtime.sendMessage({type:"getTabSettings",payload:[t]},a=>{i(a)}))})();
